<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<link rel="icon" href="/favicon.ico">
<meta name="viewport" content="width=device-width, initial-scale=1">
<base href="">
<!--ネットワーク上に公開する予定が無いのでbaseは一旦コメントアウト
<base href="">
-->

<title>Material Book | スクロール量を取得する</title>
<!-- ドキュメントの簡単な説明 -->
<!-- contentの値は、検索エンジンの結果として使用される場合があります。(だいたい150文字まで。デバイスによって表示される文字数がかわる事もある) keywordに関しては適切なものを入れないのであれば無い方がいい -->
<meta name="description" content="JSを使ってボタンクリックでダークモードに切り替えるやつです">

<!-- このドキュメントの翻訳を提供しないようGoogleに指示 -->
<meta name="google" content="notranslate">
<!-- 検索エンジンのクロールとインデックス作成の動作を制御 -->
<meta name="robots" content="none"><!-- すべての検索エンジン用 公開しないのでnoneを入れておくことにする -->

<!--link rel="stylesheet" href="css/reset.css"-->
<link rel="stylesheet" href="../css/reset.css">
<link rel="stylesheet" href="../css/style.min.css">

</head>
<body>
<!--JSの学習用のディレクトリなので、cssとjsはとりあえず<body>の中に書くよ-->
<style>
#bar {background-color: #85b6e1; position: fixed; top: 0; left: 0; height: 10px;}

.here {width: 100%; display: flex; flex-direction: column; align-content: center;}
.imgTest {width: 100%; height: auto;}
@media screen and (min-width: 767px) {
.here {width: 70%;}

}
</style>
    <header>
        <div class="logo"><a href="../">Material Book</a></div>
        <!--menu start-->
        <div class="hamburger-menu">
            <!-- ボタンが押されたかどうかをチェックボックスで判断する -->
             <input type="checkbox" id="menu-btn-check">
             <!--  ハンバーガーボタン -->
               <label for="menu-btn-check" class="menu-btn"><span></span></label>
               <!--menu inner-->
               <div class="menu-content">
                <ul>
                    <li><a href="../list/index.html">List</a></li>
                    <li><a href="../article/index.html">Article</a></li>
                    <li><a href="index.html">Learning</a></li>
                    <li><a href="../about/index.html">About</a></li>
                </ul>
            </div>
            <!--/menu inner end-->
        </div>
        <!--/menu end-->
    </header>
    
    <main>
        <div id="bar"></div>
        <div class="contents">
            <section class="article">
                <h1 class="mb20">スクロール量を取得する</h1>
                <p class="mb10">スクロール量を取得して、ページ上部のプログレスバーに反映させるやつ。</p>
                <p class="mb20">読み物のページにたまについてる印象だけど、プログレスバーの有無は置いといて、ある程度の%を超えたら何かが表示される的なものの基本になるんだろうな。</p>
                <p class="mb20">これレスポンシブで試したいわけだけど、今のままだとスマホでは全然スクロールされる内容量にならないので画像を無駄に足すことにする。</p>
                
                <img class="imgTest mb20" src="../images/IMG_6780.jpg">
                <img class="imgTest mb20" src="../images/IMG_6841.jpg">
            </section>
        </div>
    </main>
    <footer>
        <ul>
            <li><a href="../">ホーム</a>&nbsp;&gt;</li>
            <li><a href="index.html">Learning</a>&nbsp;&gt;</li>
            <li>スクロール量を取得する</li>
        </ul>
        <p>&copy;スナックいばら</p>
    </footer>

<script>
    const getScrollPrecent = () => {
        // スクロール量
        const scrolled = window.scrollY;

        // ページ全体の高さ
        const pageHeight = document.documentElement.scrollHeight;

        // 表示領域の高さ
        const viewHeight = document.documentElement.clientHeight;

        // スクロールされた割合
        const percentage = scrolled / (pageHeight - viewHeight) * 100;
        
        //幅を指定
        document.querySelector('#bar').style.width = `${percentage}%`;

        //console.log(`ページの高さ：${pageHeight}。表示領域の高さ：${viewHeight}`)
    };

    window.addEventListener(`scroll`, getScrollPrecent);

</script>
</body>

</html>